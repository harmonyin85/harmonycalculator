<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎵 하모니실용음악학원 - 수강료 계산기</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 25px;
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #667eea;
        }

        .section h3 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .section h3::before {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .class-options {
            display: grid;
            gap: 12px;
        }

        .class-option {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 15px 20px;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .class-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .class-option.has-selection {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .class-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .class-name {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .class-price {
            font-weight: 700;
            color: #ff6b6b;
            font-size: 0.95em;
        }

        .class-option.has-selection .class-price {
            color: #fff;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 20px;
        }

        .quantity-btn {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }

        .quantity-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .class-option.has-selection .quantity-btn {
            background: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .class-option.has-selection .quantity-btn:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .quantity-display {
            font-weight: 700;
            font-size: 1.2em;
            min-width: 25px;
            text-align: center;
        }

        .discount-options {
            display: grid;
            gap: 10px;
        }

        .discount-option {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            padding: 12px 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .discount-option:hover {
            border-color: #00b894;
            transform: translateX(5px);
        }

        .discount-option.selected {
            border-color: #00b894;
            background: #00b894;
            color: white;
            transform: translateX(5px);
        }

        .discount-option input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
        }

        .result {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
        }

        .result h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .result .total-price {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .result .monthly-price {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .result .quarterly-notice {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .result .original-price {
            font-size: 1.1em;
            opacity: 0.8;
            text-decoration: line-through;
            margin-bottom: 5px;
        }

        .result .savings {
            font-size: 1.2em;
            color: #fdcb6e;
            font-weight: 600;
        }

        .class-summary {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
        }

        .class-summary h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .class-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .tip {
            background: linear-gradient(135deg, #fdcb6e, #f39c12);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 600px) {
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }

            .class-option {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .quantity-control {
                margin-left: 0;
                align-self: flex-end;
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎵 하모니실용음악학원</h1>
            <div class="subtitle">수강료 계산기</div>
        </div>
        
        <div class="content">
            <div class="section">
                <h3 style="color: #667eea;">💡 간단한 할인 공식</h3>
                <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 15px;">
                    <div style="display: grid; gap: 15px; font-size: 1.05em;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                            <span>🏠 <strong>가족 할인</strong></span>
                            <span style="color: #667eea; font-weight: bold;">-1만원 / 1개월</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                            <span>👥 <strong>지인 추천 할인</strong></span>
                            <span style="color: #667eea; font-weight: bold;">-3만원 / 1개월 (첫달만)</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9ff; border-radius: 8px;">
                            <span>📅 <strong>3개월 일괄결제 할인</strong></span>
                            <span style="color: #667eea; font-weight: bold;">-10% 추가 할인</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3 style="color: #667eea;">📚 수업 선택 (개수 설정 가능)</h3>
                <div class="class-options">
                    <div class="class-option" data-class="exam" data-price="250000">
                        <div class="class-info">
                            <div class="class-name">입시반</div>
                            <div class="class-price">25만원 / 1개월</div>
                        </div>
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="changeQuantity('exam', -1)">−</button>
                            <span class="quantity-display" id="exam-quantity">0</span>
                            <button class="quantity-btn" onclick="changeQuantity('exam', 1)">+</button>
                        </div>
                    </div>

                    <div class="class-option" data-class="private60" data-price="230000">
                        <div class="class-info">
                            <div class="class-name">개인반(60분)</div>
                            <div class="class-price">23만원 / 1개월</div>
                        </div>
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="changeQuantity('private60', -1)">−</button>
                            <span class="quantity-display" id="private60-quantity">0</span>
                            <button class="quantity-btn" onclick="changeQuantity('private60', 1)">+</button>
                        </div>
                    </div>

                    <div class="class-option" data-class="private30" data-price="180000">
                        <div class="class-info">
                            <div class="class-name">개인반(30분)</div>
                            <div class="class-price">18만원 / 1개월</div>
                        </div>
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="changeQuantity('private30', -1)">−</button>
                            <span class="quantity-display" id="private30-quantity">0</span>
                            <button class="quantity-btn" onclick="changeQuantity('private30', 1)">+</button>
                        </div>
                    </div>

                    <div class="class-option" data-class="group" data-price="120000">
                        <div class="class-info">
                            <div class="class-name">그룹반</div>
                            <div class="class-price">12만원 / 1개월</div>
                        </div>
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="changeQuantity('group', -1)">−</button>
                            <span class="quantity-display" id="group-quantity">0</span>
                            <button class="quantity-btn" onclick="changeQuantity('group', 1)">+</button>
                        </div>
                    </div>

                    <div class="class-option" data-class="duet" data-price="150000">
                        <div class="class-info">
                            <div class="class-name">듀엣/밴드반</div>
                            <div class="class-price">15만원 / 1개월</div>
                        </div>
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="changeQuantity('duet', -1)">−</button>
                            <span class="quantity-display" id="duet-quantity">0</span>
                            <button class="quantity-btn" onclick="changeQuantity('duet', 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3 style="color: #00b894;">💰 추가 할인</h3>
                <div class="discount-options">
                    <div class="discount-option" data-discount="family">
                        <input type="checkbox" id="family">
                        <label for="family">가족 할인 - 1인당 10,000원 할인</label>
                    </div>
                    <div class="discount-option" data-discount="referral">
                        <input type="checkbox" id="referral">
                        <label for="referral">지인 추천 할인 - 1인당 30,000원 할인 (첫달)</label>
                    </div>
                    <div class="discount-option" data-discount="quarterly">
                        <input type="checkbox" id="quarterly">
                        <label for="quarterly">3개월 일괄결제 할인 - 10% 추가 할인</label>
                    </div>
                </div>
            </div>

            <div class="result fade-in" id="result" style="display: none;">
                <h3>💸 최종 수강료</h3>
                <div class="class-summary" id="classSummary"></div>
                <div class="total-price" id="totalPrice">0원</div>
                <div class="original-price" id="originalPrice"></div>
                <div class="savings" id="savings"></div>
            </div>

            <div class="tip">
                <strong>💡 할인 팁:</strong><br>
                3개월 일괄결제 + 지인 추천을 함께 이용하면 최대 할인 혜택을 받을 수 있어요!
            </div>
        </div>
    </div>

    <script>
        const classData = {
            exam: { name: '입시반', price: 250000 },
            private60: { name: '개인반(60분)', price: 230000 },
            private30: { name: '개인반(30분)', price: 180000 },
            group: { name: '그룹반', price: 120000 },
            duet: { name: '듀엣/밴드반', price: 150000 }
        };

        let classQuantities = {
            exam: 0,
            private60: 0,
            private30: 0,
            group: 0,
            duet: 0
        };

        let selectedDiscounts = [];

        function changeQuantity(classType, change) {
            const newQuantity = classQuantities[classType] + change;
            if (newQuantity >= 0) {
                classQuantities[classType] = newQuantity;
                document.getElementById(classType + '-quantity').textContent = newQuantity;
                
                // Update visual state
                const option = document.querySelector(`[data-class="${classType}"]`);
                if (newQuantity > 0) {
                    option.classList.add('has-selection');
                } else {
                    option.classList.remove('has-selection');
                }
                
                // Update minus button state
                const minusBtn = option.querySelector('.quantity-btn');
                minusBtn.disabled = newQuantity === 0;
                
                calculateTotal();
            }
        }

        // 할인 선택 이벤트
        document.querySelectorAll('.discount-option').forEach(option => {
            option.addEventListener('click', function() {
                const checkbox = this.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
                
                if (checkbox.checked) {
                    this.classList.add('selected');
                } else {
                    this.classList.remove('selected');
                }
                
                updateSelectedDiscounts();
                calculateTotal();
            });
        });

        function updateSelectedDiscounts() {
            selectedDiscounts = [];
            document.querySelectorAll('.discount-option input[type="checkbox"]:checked').forEach(checkbox => {
                selectedDiscounts.push(checkbox.parentElement.dataset.discount);
            });
        }

        function calculateTotal() {
            const resultDiv = document.getElementById('result');
            const totalPriceDiv = document.getElementById('totalPrice');
            const originalPriceDiv = document.getElementById('originalPrice');
            const savingsDiv = document.getElementById('savings');
            const classSummaryDiv = document.getElementById('classSummary');
            
            // Check if any classes selected
            const totalClasses = Object.values(classQuantities).reduce((sum, qty) => sum + qty, 0);
            if (totalClasses === 0) {
                resultDiv.style.display = 'none';
                return;
            }

            let originalPrice = 0;
            let classDetails = [];

            // Calculate original price and create summary
            Object.keys(classQuantities).forEach(classType => {
                const quantity = classQuantities[classType];
                if (quantity > 0) {
                    const price = classData[classType].price;
                    const subtotal = price * quantity;
                    originalPrice += subtotal;
                    
                    classDetails.push({
                        name: classData[classType].name,
                        quantity: quantity,
                        price: price,
                        subtotal: subtotal
                    });
                }
            });

            // Create class summary
            let summaryHTML = '<h4>📋 선택한 수업</h4>';
            classDetails.forEach(detail => {
                summaryHTML += `
                    <div class="class-summary-item">
                        <span>${detail.name} × ${detail.quantity}개월</span>
                        <span>${detail.subtotal.toLocaleString()}원</span>
                    </div>
                `;
            });
            classSummaryDiv.innerHTML = summaryHTML;

            let finalPrice = originalPrice;
            let totalSavings = 0;
            
            // Apply discounts
            selectedDiscounts.forEach(discount => {
                switch(discount) {
                    case 'family':
                        totalSavings += 10000 * totalClasses;
                        break;
                    case 'referral':
                        totalSavings += 30000 * totalClasses;
                        break;
                }
            });
            
            finalPrice -= totalSavings;
            
            // Apply quarterly discount last
            let isQuarterly = selectedDiscounts.includes('quarterly');
            if (isQuarterly) {
                const quarterlyDiscount = Math.floor(finalPrice * 0.1);
                finalPrice = Math.floor(finalPrice * 0.9);
                totalSavings += quarterlyDiscount;
            }
            
            // Display results
            let resultHTML = '';
            
            if (isQuarterly) {
                const quarterlyTotal = finalPrice * 3;
                resultHTML = `
                    <div class="quarterly-notice">📅 3개월 일괄결제 금액</div>
                    <div class="monthly-price">월 ${finalPrice.toLocaleString()}원 × 3개월</div>
                    <div class="total-price">${quarterlyTotal.toLocaleString()}원</div>
                `;
            } else {
                resultHTML = `<div class="total-price">${finalPrice.toLocaleString()}원</div>`;
            }
            
            totalPriceDiv.innerHTML = resultHTML;
            
            if (totalSavings > 0) {
                originalPriceDiv.textContent = `원가: ${originalPrice.toLocaleString()}원`;
                savingsDiv.textContent = `💰 ${totalSavings.toLocaleString()}원 절약!`;
                originalPriceDiv.style.display = 'block';
                savingsDiv.style.display = 'block';
            } else {
                originalPriceDiv.style.display = 'none';
                savingsDiv.style.display = 'none';
            }
            
            resultDiv.style.display = 'block';
        }

        // 체크박스 직접 클릭 시에도 동작하도록
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function(e) {
                e.stopPropagation();
                const option = this.parentElement;
                
                if (this.checked) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
                
                updateSelectedDiscounts();
                calculateTotal();
            });
        });

        // Initialize minus buttons as disabled
        document.querySelectorAll('.quantity-btn').forEach((btn, index) => {
            if (index % 2 === 0) { // minus buttons
                btn.disabled = true;
            }
        });
    </script>
</body>
</html>
